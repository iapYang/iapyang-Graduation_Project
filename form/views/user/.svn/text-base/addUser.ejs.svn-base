<!DOCTYPE html>
<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>AddUser</title>
  <link rel="stylesheet" type="text/css" href="/styles/sweetalert.css">
  <link rel="stylesheet" type="text/css" href="/styles/materialize.css">
  <link rel="stylesheet" type="text/css" href="/styles/style.css">
  <script type="text/javascript" src="/js/jquery.js"></script>
  <script type="text/javascript" src="/js/materialize.js"></script>
  <script type="text/javascript" src="/js/sweetalert.min.js"></script>
  <script type="text/javascript" src="/js/validator.min.js"></script>
  <script type="text/javascript" src="/js/TweenMax.js"></script>
  <!-- <script type="text/javascript" src="/js/index.js"></script> -->
</head>

<body>
  <div class="top-container">
    <img class="logo-bg" src="/images/logo-bg.jpg" alt="">
    <img class="logo" src="/images/logo.png" alt="">
    <img class="txt" src="/images/txt.png" alt="">
  </div>
  <div class="content">
    <!-- option1 -->
    <!-- <div class="divider"></div> -->
    <div class="section">
      <!-- <i class="material-icons large prefix">account_circle</i> -->
      <span class="en-text">&nbsp;BASIC INFORMATION&nbsp;|</span>
      <span class="zh-text">&nbsp;基本资料</span>
    </div>
    <!-- <form action="/user/addUser" method="post" class="option1"> -->
    <div class="row option1">
      <div class="input-field col s3">
        <input id="option1-name" name="name" type="text" class="validate">
        <label for="option1-name">
          <span>Name</span>
          </br>
          <span>姓名</span>
        </label>
      </div>
      <div class="input-field col s3">
        <input type="radio" class="with-gap" name="sex" value="0" id="option1-male" checked="checked" />
        <label for="option1-male">
          <span>M</span>
          </br>
          <span>男</label>
        <input type="radio" class="with-gap" name="sex" value="1" id="option1-female" />
        <label for="option1-female">
          <span>F</span>
          </br>
          <span>女</label>
      </div>
      <div class="input-field col s5">
        <input id="option1-birth" name="birthDay" type="text" class="validate">
        <label for="option1-birth">
          <span>Age</span>
          </br>
          <span>年龄</span>
        </label>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s5">
        <input id="option1-nation" name="nationality" type="text" class="validate">
        <label for="option1-nation">
          <span>Nationality</span>
          </br>
          <span>民族</span>
        </label>
      </div>
      <div class="input-field col s5 offset-s1">
        <input id="option1-residence" name="residence" type="text" class="validate">
        <label for="option1-residence">
          <span>Registered Residence</span>
          </br>
          <span>户籍所在地</span>
        </label>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s5">
        <input id="option1-email" name="email" type="email" class="validate">
        <label for="option1-email">
          <span>E-mail Address</span>
          </br>
          <span>电子邮箱</span>
        </label>
      </div>
      <div class="input-field col s5 offset-s1">
        <input id="option1-phone" name="phone" type="tel" class="validate">
        <label for="option1-phone">
          <span>Phone Number</span>
          </br>
          <span>手机号码</span>
        </label>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s5">
        <input id="option1-idnu" name="idNu" type="text" class="validate">
        <label for="option1-idnu">
          <span>ID NO.</span>
          </br>
          <span>身份证号码</span>
        </label>
      </div>
      <div class="input-field col s5 offset-s1">
        <input id="option1-address" name="nowAddress" type="text" class="validate">
        <label for="option1-address">
          <span>Address</span>
          </br>
          <span>现住地址</span>
        </label>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s5">
        <input id="option1-position" name="positionApply" type="text" class="validate">
        <label for="option1-position">
          <span>Position Applying For</span>
          </br>
          <span>应聘岗位</span>
        </label>
      </div>
      <div class="input-field col s5 offset-s1">
        <input id="option1-exceptSal" name="exceptSalary" type="text" class="validate">
        <label for="option1-exceptSal">
          <span>Excepted Salary</span>
          </br>
          <span>期望薪水</span>
        </label>
      </div>
    </div>

    <!-- add date:2016-02-24 -->
    <div class="row">
      <div class="input-field col s5">
        <input id="option1-workAge" name="workAge" type="text" class="validate">
        <label for="option1-workAge">
          <span>Work Experience</span>
          </br>
          <span>工作年限</span>
        </label>
      </div>
      <div class="input-field col s5 offset-s1">
        <input id="option1-lastSalary" name="lastSalary" type="text" class="validate">
        <label for="option1-lastSalary">
          <span>Recent Job Salary</span>
          </br>
          <span>最近一份工作的薪水</span>
        </label>
      </div>
    </div>
    <!-- ///////分割线/////// -->

    <div class="row">
      <div class="input-field col s5">
        <input id="option1-startDate" name="startDate" type="date" class="datepicker">
        <label for="option1-startDate">
          <span>Starting Date</span>
          </br>
          <span>到岗时间</span>
        </label>
      </div>
      <div class="selectReg input-field col s5 offset-s1">
        <select class="icons">
          <option value="" disabled selected>选择你的登记地址</option>
          <option value="" data-icon="/images/snow.png" class="circle">南京</option>
          <option value="" data-icon="/images/snow.png" class="circle">长沙</option>
          <option value="" data-icon="/images/snow.png" class="circle">无锡</option>
        </select>
        <label>Choose your Registered Address</label>
      </div>
    </div>


    <!-- </form> -->
    <!-- </div> -->
    <!-- option2 -->
    <div class="divider"></div>
    <div class="section">
      <!-- <i class="material-icons large prefix">translate</i> -->
      <span class="en-text">&nbsp;ADUCATIONAL BACKGROUND&nbsp;|</span>
      <span class="zh-text">&nbsp;教育背景</span>
    </div>
    <!-- <form action="/user/addUser" method="post" class="option2"> -->
    <div class="row option2">
      <div class="input-field col s2">
        <input id="option2-from" name="option2-from" type="date" class="datepicker">
        <label for="option2-from">
          <span>From</span>
          </br>
          <span>开始时间</span>
        </label>
      </div>
      <div class="input-field col s2 offset-s1">
        <input id="option2-to" name="option2-to" type="date" class="datepicker">
        <label for="option2-to">
          <span>To</span>
          </br>
          <span>结束时间</span>
        </label>
      </div>
      <div class="input-field col s5 offset-s1">
        <input id="option2-major" name="major" type="text" class="validate">
        <label for="option2-major">
          <span>Major</span>
          </br>
          <span>专业</span>
        </label>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s5">
        <input id="option2-school" name="school" type="text" class="validate">
        <label for="option2-school">
          <span>Graduated From</span>
          </br>
          <span>毕业院校</span>
        </label>
      </div>
      <div class="input-field col s5 offset-s1">
        <input id="option2-diploma" name="diploma" type="text" class="validate">
        <label for="option2-diploma">
          <span>Diploma</span>
          </br>
          <span>文凭</span>
        </label>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s5">
        <input id="option2-cet" name="cet" type="text" class="validate">
        <label for="option2-cet">
          <span>English</span>
          </br>
          <span>英语能力</span>
        </label>
      </div>
    </div>
    <!-- </form> -->
    <!-- option3 -->
    <div class="divider"></div>
    <div class="section">
      <!-- <i class="material-icons large prefix">work</i> -->
      <span class="en-text">&nbsp;WORK EXPERIENCE&nbsp;|</span>
      <span class="zh-text">&nbsp;工作经历</span>
    </div>
    <!-- <form action="/user/addUser" method="post" class="option3"> -->
    <div class="row option3">
      <div class="input-field col s2">
        <input id="option3-from" name="option3-from" type="date" class="option3Input datepicker">
        <label for="option3-from">
          <span>From</span>
          </br>
          <span>开始时间</span>
        </label>
      </div>
      <div class="input-field col s2 offset-s1">
        <input id="option3-to" name="option3-to" type="date" class="option3Input datepicker">
        <label for="option3-to">
          <span>To</span>
          </br>
          <span>结束时间</span>
        </label>
      </div>
      <div class="input-field col s5 offset-s1">
        <input id="option3-salary" name="salary" type="text" class="option3Input validate">
        <label for="option3-salary">
          <span>Salary</span>
          </br>
          <span>待遇</span>
        </label>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s5">
        <input id="option3-company" name="company" type="text" class="option3Input validate">
        <label for="option3-company">
          <span>Company Name</span>
          </br>
          <span>工作单位</span>
        </label>
      </div>
      <div class="input-field col s5 offset-s1">
        <input id="option3-position" name="position" type="text" class="option3Input validate">
        <label for="option3-position">
          <span>Position</span>
          </br>
          <span>职位</span>
        </label>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s5">
        <input id="option3-address" name="address" type="text" class="option3Input validate">
        <label for="option3-address">
          <span>Address</span>
          </br>
          <span>地址</span>
        </label>
      </div>
      <div class="input-field col s5 offset-s1">
        <input id="option3-super" name="recommender" type="text" class="option3Input validate">
        <label for="option3-super">
          <span>Supervisor's Name And Position</span>
          </br>
          <span>推荐人及职位</span>
        </label>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s12">
        <textarea id="option3-reason" name="reason" type="text" class="option3Input materialize-textarea"></textarea>
        <label for="option3-reason">
          <span>Reason for leaving</span>
          </br>
          <span>离职原因</span>
        </label>
      </div>
    </div>

    <div class="divider"></div>
    <div class="row option3">
      <div class="input-field col s2">
        <input id="option3-from2" name="option3-from2" type="date" class="option3Input datepicker">
        <label for="option3-from2">
          <span>From</span>
          </br>
          <span>开始时间</span>
        </label>
      </div>
      <div class="input-field col s2 offset-s1">
        <input id="option3-to2" name="option3-to2" type="date" class="option3Input datepicker">
        <label for="option3-to2">
          <span>To</span>
          </br>
          <span>结束时间</span>
        </label>
      </div>
      <div class="input-field col s5 offset-s1">
        <input id="option3-salary2" name="salary2" type="text" class="option3Input validate">
        <label for="option3-salary2">
          <span>Salary</span>
          </br>
          <span>待遇</span>
        </label>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s5">
        <input id="option3-company2" name="company2" type="text" class="option3Input validate">
        <label for="option3-company2">
          <span>Company Name</span>
          </br>
          <span>工作单位</span>
        </label>
      </div>
      <div class="input-field col s5 offset-s1">
        <input id="option3-position2" name="position2" type="text" class="option3Input validate">
        <label for="option3-position2">
          <span>Position</span>
          </br>
          <span>职位</span>
        </label>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s5">
        <input id="option3-address2" name="address2" type="text" class="option3Input validate">
        <label for="option3-address2">
          <span>Address</span>
          </br>
          <span>地址</span>
        </label>
      </div>
      <div class="input-field col s5 offset-s1">
        <input id="option3-super2" name="recommender2" type="text" class="option3Input validate">
        <label for="option3-super2">
          <span>Supervisor's Name And Position</span>
          </br>
          <span>推荐人及职位</span>
        </label>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s12">
        <textarea id="option3-reason2" name="reason2" type="text" class="option3Input materialize-textarea"></textarea>
        <label for="option3-reason2">
          <span>Reason for leaving</span>
          </br>
          <span>离职原因</span>
        </label>
      </div>
    </div>
    <!-- </form> -->
    <!-- option4 -->
    <div class="divider"></div>
    <div class="section">
      <!-- <i class="material-icons large prefix">offline_pin</i> -->
      <span class="en-text">&nbsp;SPECIAL SKILLS&nbsp;|</span>
      <span class="zh-text">&nbsp;专长</span>
    </div>
    <!-- <form action="/user/addUser" method="post"> -->
    <div class="row option4">
      <div class="input-field col s5">
        <input id="option4-skill1" name="skill1" type="text" class="option3Input validate">
        <label class="skilllab" for="option4-skill1">1</label>
      </div>
      <div class="input-field col s5 offset-s1">
        <input id="option4-skill2" name="skill2" type="text" class="option3Input validate">
        <label class="skilllab" for="option4-skill2">2</label>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s5">
        <input id="option4-skill3" name="skill3" type="text" class="option3Input validate">
        <label class="skilllab" for="option4-skill3">3</label>
      </div>
      <div class="input-field col s5 offset-s1">
        <input id="option4-skill4" name="skill4" type="text" class="option3Input validate">
        <label class="skilllab" for="option4-skill4">4</label>
      </div>
    </div>
    <!-- </form> -->
    <!-- option5 -->
    <div class="divider"></div>
    <div class="section">
      <!-- <i class="material-icons large prefix">hearing</i> -->
      <span class="en-text">&nbsp;HOW DID YOU KNOW OUR HIRING&nbsp;|</span>
      <span class="zh-text">&nbsp;你是如何了解我们的招聘？</span>
    </div>
    <!-- <form action="/user/addUser" method="post" class="option5"> -->
    <div class="row option5">
      <div class="input-field col s2">
        <input type="radio" name="knowRoute" value="1" class="with-gap" id="option5-site" />
        <label for="option5-site">
          <span>Job Sites</span>
          </br>
          <span>招聘网站</span>
        </label>
      </div>
      <div class="input-field col s3">
        <input type="radio" name="knowRoute" value="2" class="with-gap" id="option5-referee" />
        <label for="option5-referee">
          <span>Recommendation,Referee</span>
          </br>
          <span>朋友推荐，推荐人</span>
        </label>
      </div>
      <div class="input-field col s2">
        <input type="radio" name="knowRoute" value="3" class="with-gap" id="option5-other" />
        <label for="option5-other">
          <span>Others</span>
          </br>
          <span>其他选择</span>
        </label>
      </div>
      <div class="input-field col s3 detail">
        <input disabled="disabled" name="detail" id="option5-cont" type="text" class="validate option3Input" placeholder="请先勾选">
        <label class="skilllab" for="option5-cont">Details</label>
      </div>
    </div>
    <!-- </form> -->
    <!-- option6 -->
    <div class="divider"></div>
    <!-- <form action="/user/addUser" method="post"> -->
    <table class="bordered option6">
      <tr>
        <td class="td-first">
          <div class="row section">
            <div class="col s12 center">
              <span class="en-text2">By submiting below, i acknowledge that I have read and understand the following...</span>
              </br>
              <span class="zh-text">在提交之前，我已阅读并了解以下提示...</span>
            </div>
          </div>
        </td>
      </tr>
      <tr>
        <td class="td-second">
          <div class="row">
            <div class="col s12 center">
              <span class="en-text2">I personally guarantee that the information I provided on this application is accurate.</span>
              </br>
              <span class="zh-text">本人承诺保证所有填写资料真实。</span>
            </div>
            <div class="input-field col s5 offset-s9 center">
              <input type="checkbox" class="filled-in" id="option6-box" />
              <label for="option6-box">
                <span>Have Read</span>
                </br>
                <span>已阅读</span>
              </label>
            </div>
          </div>
        </td>
      </tr>
      <tr>
        <td>
          <div class="row center">
            <button class="submit btn waves-effect waves-light" type="submit">Submit
              <i class="material-icons right">send</i>
            </button>
          </div>
        </td>
      </tr>
    </table>
    <!-- </form> -->
  </div>

  <script>
    var varStr = ['#'];
        submit = true,
        pic = $('.datepicker'),
        $topCont = $('.top-container');

    var sTop, inf;

    $topCont.on('click', function(){
        window.history.go(-1);
    });


    $('.datepicker').pickadate({
      selectMonths: true, // Creates a dropdown to control month
      selectYears: 30 // Creates a dropdown of 15 years to control year
    });

    $('select').material_select();

    // Verify input is null or not
    $('input:not(".option3Input")').on('blur', function() {
      var $this = $(this);
      var str = $this.val();
      if ($this.hasClass('datepicker')) {
        return false;
      }
      if (str == '') {
        submit = false;
        $this.addClass('invalid');
        return false;
      }
      submit = true;
    });

    //Verify phone number
    $('#option1-phone').on('blur', function() {
      var $this = $(this);
      var str = $this.val();
      var reg = /^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/;
      if (str != '' && !reg.test(str)) {
        swal("手机号码不正确", "error");
        //   console.log('手机号码不正确');
        $this.addClass('invalid');
        return false;
      }
    });

    //Verify email
    $('#option1-email').on('blur', function() {
      var $this = $(this);
      var str = $this.val();
      var reg = /^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;
      if (str != '' && !reg.test(str)) {
        swal("电子邮箱不正确", "error");
        //   console.log('电子邮箱不正确');
        $this.addClass('invalid');
        return false;
      }
    });

    //Verify id number
    $('#option1-idnu').on('blur', function() {
      var $this = $(this);
      var str = $this.val();
      var reg = /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;
      if (str != '' && !reg.test(str)) {
        swal("身份证号码不正确", "error");
        //   console.log('身份证号码不正确');
        $this.addClass('invalid');
        return false;
      }
    });

    $('.option5 [type="radio"]').on('click', function() {
      $('.detail [type="text"]').removeAttr('disabled');
      $('.detail [type="text"]').attr('placeholder', '');
    });

    //提交表单
    $('.submit').on('click', function() {
      //不包括工作经历、专长、了解招聘细节
      $('input:not(".option3Input")').each(function(index, element) {
        if ($(this).val() == '' && $(this).attr('id') != undefined) {
          inf = '';
          submit = false;
          $(this).focus();
          sTop = $(this).offset().top;
          $(this).addClass('invalid');
          return false;
        }
        $(this).removeClass('invalid');
        submit = true;

        //如何了解我们招聘
        $('[name="knowRoute"]').each(function(index, element) {
          inf = '如何了解我们招聘的？';
          submit = false;
          if ($(this).is(':checked')) {
            inf = '';
            submit = true;
            return false;
          }
        });
      });

      if (!submit) {
        sweetAlert({
          title: "字段不能为空",
          text: inf,
          type: "error",
          closeOnConfirm: true
        }, function() {
          TweenMax.to('html,body', .5, {
            scrollTop: sTop - $(window).height() / 2
          });
        });
        return false;
      }

      //登记地址是否选择
      if ($('.selectReg input').val() == $('.selectReg option').eq(0).text()) {
        sTop = $('.selectReg input').offset().top;
        $('.selectReg input').addClass('invalid');
        sweetAlert({
          title: "请选择登记地址",
          type: "error",
          closeOnConfirm: true
        }, function() {
          TweenMax.to('html,body', .5, {
            scrollTop: sTop - $(window).height() / 2,
            onComplete: function() {
              $('.selectReg input').focus();
            }
          });
        });
        return false;
      } else {
        $('.selectReg input').removeClass('invalid');
      }

      if ($('.invalid').length != 0) {
        sweetAlert("格式不正确", "Something went wrong!", "error");
        return false;
      }

      if (!$('#option6-box').is(':checked')) {
        sweetAlert("请先阅读相关说明", "Something went wrong!", "error");
        return false;
      }

      create();
    });


    //与后台交互
    function create() {
      swal({
        title: "Are you sure?",
        text: "Are you sure that you want to submit this ApplicationForm?",
        type: "warning",
        showCancelButton: true,
        closeOnConfirm: false,
        confirmButtonText: "Yes, submit it!",
        confirmButtonColor: "#ec6c62"
      }, function() {
        $.ajax({
            type: 'POST',
            url: '/user/addUser',
            data: {
              name: $('#option1-name').val(),
              sex: $('[name="sex"]:checked').val() == 0 ? '男' : '女',
              birthDay: $('#option1-birth').val(),
              workAge: $('#option1-workAge').val(),
              lastSalary: $('#option1-lastSalary').val(),
              nationality: $('#option1-nation').val(),
              residence: $('#option1-residence').val(),
              email: $('#option1-email').val(),
              phone: $('#option1-phone').val(),
              idNu: $('#option1-idnu').val(),
              nowAddress: $('#option1-address').val(),
              positionApply: $('#option1-position').val(),
              exceptSalary: $('#option1-exceptSal').val(),
              startDate: $('#option1-startDate').val(),
              registeredAdd: $('.selectReg input').val(),
              school_from: $('#option2-from').val(),
              school_to: $('#option2-to').val(),
              major: $('#option2-major').val(),
              school: $('#option2-school').val(),
              diploma: $('#option2-diploma').val(),
              cet: $('#option2-cet').val(),
              work_from: $('#option3-from').val(),
              work_to: $('#option3-to').val(),
              salary: $('#option3-salary').val(),
              company: $('#option3-company').val(),
              position: $('#option3-position').val(),
              address: $('#option3-address').val(),
              recommender: $('#option3-super').val(),
              reason: $('#option3-reason').val(),
              work_from2: $('#option3-from2').val(),
              work_to2: $('#option3-to2').val(),
              salary2: $('#option3-salary2').val(),
              company2: $('#option3-company2').val(),
              position2: $('#option3-position2').val(),
              address2: $('#option3-address2').val(),
              recommender2: $('#option3-super2').val(),
              reason2: $('#option3-reason2').val(),
              skill1: $('#option4-skill1').val(),
              skill2: $('#option4-skill2').val(),
              skill3: $('#option4-skill3').val(),
              skill4: $('#option4-skill4').val(),
              knowRoute: $('[name="knowRoute"]:checked').val(),
              detail: $('#option5-cont').val()
          },
            dataType: "json",
            success: function(data){
                console.log(data);
                if(data.state == 666) {
                    swal({
                      title: "Submited!",
                      text: "Your information has been submited!",
                      timer: 1000,
                      showConfirmButton: false
                    });
                    setTimeout(function() {
                      location.href = '/user/waiting';
                    }, 1000);
                }else {
                   console.log(data);
                   swal("DB error", "Something went wrong!", "error");
                }
            }
        });

        //   .error(function(data) {
        //     console.log(data);
        //     swal("DB error", "Something went wrong!", "error");
        //   });
      });
    }
  </script>
</body>

</html>
